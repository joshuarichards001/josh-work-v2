---
import Layout from "../components/Layout.astro";

import projects from "../projects.json";
import works from "../works.json";

import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort((a, b) =>
  a.data.date < b.data.date ? 1 : -1,
);
---

<Layout title="Josh Richards" description="Josh Richards personal website">
  <h1 class="mb-3 text-3xl font-semibold">Hi, I'm Josh Richards</h1>
  <p class="mb-4">
    I'm a Software Engineer at Xero where I help modernise the Invoicing
    Platform. I also love to build simple web apps to solve everyday problems.
  </p>
  <p>
    Feel free to email me at <a
      class="underline hover:text-blue-500"
      href="mailto:hello@josh.work">hello@josh.work</a
    >.
  </p>
  <section class="mt-8">
    <h2 class="mb-2 text-2xl font-semibold">Work</h2>
    <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
      {
        works.map((work) => (
          <article class="group rounded-md border px-4 pb-3  pt-2">
            <a href={work.link} class="block">
              <h3 class="w-fit group-hover:text-blue-500 group-hover:underline">
                {work.name} ({work.time})
              </h3>
              <p class=" text-sm text-zinc-500">{work.description}</p>
            </a>
          </article>
        ))
      }
    </div>
  </section>
  <section class="mt-8">
    <h2 class="mb-2 text-2xl font-semibold">Projects</h2>
    <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
      {
        projects.map((project) => (
          <article class="group rounded-md border px-4 pb-3  pt-2">
            <a href={project.link} class="block">
              <h3 class="w-fit group-hover:text-blue-500 group-hover:underline">
                {project.name}
              </h3>
              <p class=" text-sm text-zinc-500">{project.description}</p>
            </a>
          </article>
        ))
      }
    </div>
  </section>
  <section class="mt-12">
    <h2 class="mb-4 text-2xl font-semibold">Blog</h2>
    {
      posts.map((post) => {
        return (
          <article class="mb-4">
            <h3 class="w-fit ">
              <a
                href={`/blog/${post.slug}`}
                class="hover:text-blue-500 hover:underline"
              >
                {post.data.title}
              </a>
            </h3>
            <p class="text-sm text-zinc-400">{post.data.description}</p>
          </article>
        );
      })
    }
  </section>
</Layout>
